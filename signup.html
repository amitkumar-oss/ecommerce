<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="signup.css">
</head>

<body>

  <form class="col-sm-5 m-auto mt-5">
    <h2 class="text-center">Sign up form</h2>


    <div class="mb-3">
      <label for="exampleInputName1" class="form-label">Name</label>
      <input type="text" class="form-control" id="name" aria-describedby="emailHelp">

    </div>
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">Email address</label>
      <input type="email" class="form-control" id="email" aria-describedby="emailHelp">

    </div>
    <div class="mb-3">
      <label for="exampleInputPassword1" class="form-label">Password</label>
      <input type="password" class="form-control" id="password">
    </div>
    <div class="mb-3">
      <label for="exampleInputAddress1" class="form-label">Address</label>
      <input type="address" class="form-control" id="address">
    </div>

    <button type="submit" class="btn btn-primary" onclick="submitHandler(event)">Submit</button>
    <p class="text-center mt-3">already a user? <a href="login.html">Login</a></p>
  </form>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

    
  <script>

    // let arr=[]
    let arr = JSON.parse(localStorage.getItem('userData')) || []   //parse use for convert string into object//
    // console.log(arr)

    let nameInput = document.querySelector('#name')
    let emailInput = document.querySelector('#email')
    let passwordInput = document.querySelector('#password')
    let addressInput = document.querySelector('#address')

    // console.log(nameInput,emailInput,passwordInput,addressInput)

    submitHandler = (e) => {
      // console.log('hello')
      e.preventDefault()
      // let nameValue=nameInput.value
      // let emailValue=emailInput.value
      // let passwordValue=passwordInput.value
      // let addressValue=addressInput.value
      // console.log(nameValue,emailValue,passwordValue,addressValue)

      // note- preventDefault use for stop auto refresh on page (after clicking submit button)



      let obj = {
        name: nameInput.value,
        email: emailInput.value,
        password: passwordInput.value,
        address: addressInput.value,

      }
      console.log(obj)

      // checking for duplicate value of email//

      let value = false
      for (let i = 0; i < arr.length; i++) {

        if (arr[i].email === obj.email) {
          value = true
          break;
        }

      }
      if (value === true) {
        console.log("already exists")
        alert("user already exists")
      }
      else {

        if (obj.name && obj.email && obj.password && obj.address) {
          console.log("new user")
          arr.push(obj)
          localStorage.setItem('userData', JSON.stringify(arr))   //JSON use for convert object into string
          window.location.href="login.html"


        }
      }


      




    }

    






  </script>
</body>

</html>